## 크로스 브라우징

웹 페이지 제작 시에 모든 브라우저에서 깨지지 않고 의도한 대로 올바르게(호환성) 나오게 하는 작업을 말한다.

[HTML, CSS, Javascript 작성 시 W3C의 웹 규격에 맞는 코딩을 함으로써 어느 브라우저, 기기에서 사이트가 의도된 대로 보여지고 작동되는 기법.]

### 크로스 브라우징 작업이 필요한 원인

**브라우저 마다** **랜더링 엔진**이 다르기 때문이다.

- 작동되지 않는 HTML5, Javascript 코드가 존재
- 해석하지 못하는 CSS 코드 존재
- 브라우저 버그들이 존재
- 브라우저마다 자체적인 CSS 스타일



***IE를 버전마다 크로스 브라우징하는 이유.***

> 최신 버전으로 자동 업데이트가 되는 브라우저가 많으나 IE는 해당되지 않는다.
> IE는 사용자가 직접 업데이트를 진행해야 하며, 윈도우 버전에 따라 최대 버전이 한정되어 있다.

 

### 랜더링 엔진(or 레이아웃 엔진)

페이지를 랜더링할 때 실질적으로 작업을 하게 되는 엔진이다.
같은 엔진을 사용하면 다른 브라우저여도 비슷하게 출력된다.

[레이아웃 엔진의 종류]트라이던트(Trident)게코(Gecko)웹킷(Webkit)프레스토(Presto)블링크(Blink)듀얼 엔진

| 트라이던트(Trident) | - IE, 아웃룩 이메일 클라이언트나 윈도우 프로그램의 미니 브라우저등에 사용된다. | 마이크로 소프트   |
| ------------------- | ------------------------------------------------------------ | ----------------- |
| 게코(Gecko)         | - 파이어 폭스, 모질라 재단의 이메일 클라이언트인 선더버드에 사용된다. | 모질라            |
| 웹킷(Webkit)        | - 초기 애플사가 사파리 엔진으로 사용하기 위해 차용했으나 현재는 웹킷 프로젝트로 분리되어 개발되고 있다. - 크롬에서도 사용되었던 엔진이며 iOS나 안드로이드의 기본 브라우저들이 이 웹킷 엔진을 사용한다. - 점유율이 높은 엔진이다. | 애플사            |
| 프레스토(Presto)    | - 오페라 15버전부터 더이상 사용하지 않는다.                  | 오페라 소프트웨어 |
| 블링크(Blink)       | - 웹킷 엔진을 사용하던 구글이 크롬이 개발, 사용하고 있는 엔진이다.  - 웹킷에서 줄기를 가져 왔기 때문에 웹킷엔지과 비슷한 모습이 보여진다.  - 프레스토 엔진을 버린 오페라가 블링크 엔진을 사용하고 있다. | 구글              |
| 듀얼 엔진           | - 국내 이스트소프트의 스윙(Swing) 브라우저를 예로 들면 크롬과 같은면서도 액티브X를 지원하는데, 독자적인 엔진이 아닌 두가지 엔진을 번갈아 사용하는 방식이기 때문에 가능하다. - 보통 트라이던트와 웹킷or블링크 엔진을 사용한다. |                   |

----

### 크로스 브라우징에 대한 오해

- 크로스 브라우징은 **동일성을 의미하지 않는다.**
  - 크로스 브라우징을 이야기 할 때 종종 볼 수 있는 글이 **'모든 브라우저에서 똑같이 보이게'**라고 하는 것을 많이 볼 수 있다.
- 크로스 브라우징은 **동등성(등가성)을 의미한다.**
  - 어떤 페이지는 일부 브라우저들에서 다른 브라우저에서 보다 더 좋아 보일 수 있지만, 어떤 브라우저로도 읽을 수 있게 되어야 합니다

> **MDN **
>
> *최신 브라우저(mordern browsers)에서는 애니메이션, 3D, 반짝이는 것들을 얻을 수 있는 반면 구형 브라우저에서는 동일한 정보를 나타내는 평면 그래픽을 얻을 수 있습니다."*  



---

### 브라우저 대응 순서, 어떤 브라우저에 초점을 둬야하는가?

***타겟이 되는 (가장 점유율이 높은) 브라우저부터 맞추는 것이 좋다.***

> 보통 기준이 되는 %이하인 브라우저는 지원에서 제외하기도 한다. 

- 점유율 조사 사이트 : http://gs.statcounter.com/

* **세계 2019/4 ~2020/4**
  * 1위 크롬 2위 사파리 3위 파이어폭스 그외 비슷비슷

- **한국 2019/4 ~2020/4**
  - 크롬 1위, 2위-3위(엎치락뒤치락) 삼성인터넷, 사파리 4위 IE, 웨일 5위 파이어폭스 그외 비슷비슷



### 크로스 브라우징 이슈 전략

#### 1. **적용 기능의 지원 브라우저를 파악하자!**

- [Can I Use](https://caniuse.com/)
- [Markup Validation Service](https://validator.w3.org)

#### 2. **모든 환경에서 지원해야 한다면 라이브러리를 활용하자!**
- [HTML5 polyfill 정리](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

#### 3. **직접 구현시에는 '기능 탐지'를 이용하자!**

```javascript
if(isIE){
    attatchEvent();
} else if(isFirefox){
    addEventListener();
}
```

**feature detection 방식**

```javascript
fucntion addHandler(el, type, handler){
    // modern browser : chrome, safari, firefox ...
    if(el.addEventListener){
        el.addEventListener(type, handler, false);
    }
    // IE
    else if(el.attachEvent){
        el.attachEvent("on" + type, handler);
    }
    //Old Browsers
    else {
        el["on" + type] = handler;
    }
}
```

#### 4.  Tool을 사용하자!

- **reset.css (or normalize.css)를 사용하자.**

  - css의 경우 browser의 기본 스타일이 제각각인 경우가 있다. 동일한 스타일을 적용하기 위해선 default 값을 초기화 시킬 필요가 있다.

- **Prefix 를 적어주자**

  - 아직 웹 표준이 안된 기능을 브라우저들이 가져다 지원하기 떄문에기능 앞에 각 브라우저들의 엔진을 prefix로 적어주는 것.

  - 모든 브라우저에서 지원하는 호환 프로퍼티를 먼저 정의하고 CSS3에서 지원하는 프로퍼티를 나중에 정의하는 방법을 사용해야 한다. 이와 같은 이유로 접두어가 없는 속성은 가장 나중에 추가해줘야 한다!

    ```css
    #menu {
    	border-radius: 15px;
    }
    
    #menu {
    	-webkit-border-radius: 15px;
    	-moz-border-radius: 15px;
    	border-radius: 15px;
    }
    ```

    

#### 참고자료

- [크로스 브라우징 이슈에 대응하는 프론트엔드 개발자들의 전략](http://asfirstalways.tistory.com/237) **(읽어볼것)**
- [크로스 브라우징(cross browsing)](https://okayoon.tistory.com/entry/크로스-브라우징cross-browsing)

- [크로스 브라우징에 대한 오해](https://mulder21c.github.io/2019/01/30/what-is-cross-browsing/) 

